<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>GEO points example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
<h1>Transform points crs:</h1>
<form action="#" th:action="@{/transformation}" th:object="${pointTransformationModel}" method="post">
    <table>
        <tr>
            <th>from</th>
            <th>to</th>
        </tr>
        <tr>
            <td>crs: <input type="text" th:field="*{fromCrs}"/></td>
            <td>crs: <input type="text" th:field="*{toCrs}"/></td>
        </tr>
        <tr>
            <td>x: <input type="text" th:field="*{x}"/></td>
            <td>x: <input type="text" th:field="*{newX}"/></td>
        </tr>
        <tr>
            <td>y: <input type="text" th:field="*{y}"/></td>
            <td>y: <input type="text" th:field="*{newY}"/></td>
        </tr>
        <tr>
            <td>z: <input type="text" th:field="*{z}"/></td>
            <td>z: <input type="text" th:field="*{newZ}"/></td>
        </tr>
    </table>

    <p><input type="submit" value="Transform"/></p>
</form>

<div>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
          integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
            integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
            crossorigin=""></script>
    <div id="map" style="width: 600px; height: 400px;"></div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var newX = parseFloat([[${pointTransformationModel.newX}]]);
            var newY = parseFloat([[${pointTransformationModel.newY}]]);

            var map = L.map('map').setView([newY, newX], 3);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            var newX = parseFloat([[${pointTransformationModel.newX}]]);
            var newY = parseFloat([[${pointTransformationModel.newY}]]);

            L.marker([newY, newX]).addTo(map)
                .bindPopup('Transformed point here')
                .openPopup();
        });

    </script>
</div>
</body>
</html>
